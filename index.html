<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>스포츠박스 '수상한놀이' 만족도 설문조사</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #eef2f6; /* Soft blue-gray background */
            line-height: 1.6;
            color: #334155; /* Slate-700 */
        }
        .form-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2.5rem;
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0; /* Light border */
        }
        .question-group {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: #f8fafc; /* Lighter background for groups */
            border-radius: 10px;
            border-left: 5px solid #3b82f6; /* Blue-500 accent border */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease-in-out;
        }
        .question-group:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        .question-title {
            font-size: 1.25rem; /* text-xl */
            font-weight: 700; /* font-bold */
            margin-bottom: 1rem;
            color: #1a202c; /* Darker text for titles */
        }
        .radio-option {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            background-color: #f1f5f9; /* Light gray for options */
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 1px solid #cbd5e1; /* Gray-300 border */
        }
        .radio-option:hover {
            background-color: #e0f2fe; /* Light blue on hover */
            border-color: #93c5fd; /* Blue-300 border on hover */
        }
        .radio-option input[type="radio"] {
            margin-right: 1rem;
            accent-color: #2563eb; /* Blue-600 */
            transform: scale(1.2); /* Slightly larger radio buttons */
        }
        textarea {
            width: 100%;
            padding: 1rem;
            border: 1px solid #cbd5e1; /* Gray-300 */
            border-radius: 8px;
            min-height: 120px;
            resize: vertical;
            font-size: 1rem;
            color: #475569; /* Slate-600 */
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        textarea:focus {
            outline: none;
            border-color: #3b82f6; /* Blue-500 on focus */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25); /* Blue-500 ring */
        }
        .text-input-other {
            display: none; /* 기본적으로 숨김 */
            margin-left: 0.75rem;
            padding: 0.5rem 0.75rem;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            font-size: 0.95rem;
            width: 180px; /* 적절한 너비 설정 */
            color: #475569;
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .text-input-other:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        .submit-button {
            width: 100%;
            padding: 1.25rem;
            background-image: linear-gradient(to right, #3b82f6, #2563eb); /* Blue gradient */
            color: #ffffff;
            font-weight: 700; /* font-bold */
            font-size: 1.125rem; /* text-lg */
            border-radius: 10px;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            transition: all 0.3s ease-in-out;
        }
        .submit-button:hover {
            background-image: linear-gradient(to right, #2563eb, #1d4ed8); /* Darker gradient on hover */
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
            transform: translateY(-2px);
        }
        .message-box {
            padding: 1.25rem;
            margin-top: 2rem;
            border-radius: 10px;
            font-weight: 600;
            text-align: center;
            font-size: 1.1rem;
        }
        .message-box.success {
            background-color: #dcfce7; /* Green-100 */
            color: #16a34a; /* Green-600 */
            border: 1px solid #86efac;
        }
        .message-box.error {
            background-color: #fee2e2; /* Red-100 */
            color: #dc2626; /* Red-600 */
            border: 1px solid #fca5a5;
        }
        .message-box.loading {
            background-color: #e0f2fe; /* Blue-100 */
            color: #2563eb; /* Blue-600 */
            border: 1px solid #93c5fd;
        }
    </style>
</head>
<body class="p-4">
    <div class="form-container">
        <h2 class="text-3xl font-bold text-center text-gray-900 mb-6">스포츠박스 하계이벤트 '수상한놀이' 만족도 설문조사</h2>
        <p class="text-gray-600 text-center mb-8">
            안녕하세요! 2025년 스포츠박스 하계이벤트 '수상한놀이'에 참여해주셔서 진심으로 감사합니다. 본 설문조사는 여러분의 소중한 의견을 듣고, 다음 행사를 더욱 즐겁고 유익하게 만들기 위해 마련되었습니다.<br>
            설문 참여에는 약 5분 정도 소요될 예정이며, 모든 답변은 익명으로 처리되며 수집된 데이터는 행사 개선 목적으로만 사용됩니다. 솔직한 답변 부탁드립니다!
        </p>

        <!-- 설문 대상 선택 -->
        <div id="surveySelection" class="question-group text-center mb-8">
            <p class="question-title">어떤 설문지에 응답하시겠습니까?</p>
            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6 mt-4">
                <label class="radio-option">
                    <input type="radio" name="survey_type_selector" value="participant" id="selectParticipant"> 참여자용 (초등학생)
                </label>
                <label class="radio-option">
                    <input type="radio" name="survey_type_selector" value="instructor" id="selectInstructor"> 인솔자용 (성인)
                </label>
            </div>
        </div>

        <!-- 참여자용 설문지 (초등학생) -->
        <div id="participantFormContainer" class="hidden">
            <h3 class="text-2xl font-bold text-center text-gray-800 mb-6">참여자용 설문지 (초등학생)</h3>
            <form id="participantSurveyForm" class="space-y-6">
                <!-- 1. 이번 '수상한놀이' 행사에 대해 얼마나 만족하셨나요? -->
                <div class="question-group">
                    <p class="question-title">1. 이번 '수상한놀이' 행사에 대해 얼마나 만족하셨나요?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="p_q1_satisfaction" value="매우 불만족" required> 매우 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q1_satisfaction" value="불만족"> 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q1_satisfaction" value="보통"> 보통
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q1_satisfaction" value="만족"> 만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q1_satisfaction" value="매우 만족"> 매우 만족
                        </label>
                    </div>
                </div>

                <!-- 2. 다음 중 가장 좋았던 활동은 무엇인가요? -->
                <div class="question-group">
                    <p class="question-title">2. 다음 중 가장 좋았던 활동은 무엇인가요? (가장 좋았던 하나만 선택해주세요.)</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="p_q2_best_activity" value="수상 안전 교육 (물놀이 안전 배우기)" required> 수상 안전 교육 (물놀이 안전 배우기)
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q2_best_activity" value="심폐소생술 교육 (친구를 돕는 방법 배우기)"> 심폐소생술 교육 (친구를 돕는 방법 배우기)
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q2_best_activity" value="바나나보트, 땅콩보트 등 레저스포츠 체험"> 바나나보트, 땅콩보트 등 레저스포츠 체험
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q2_best_activity" value="생존수영 (물에 뜨는 방법 배우기)"> 생존수영 (물에 뜨는 방법 배우기)
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q2_best_activity" value="맛있는 점심 식사"> 맛있는 점심 식사
                        </label>
                    </div>
                </div>

                <!-- 3. 다시 '수상한놀이' 행사에 참여하고 싶으신가요? -->
                <div class="question-group">
                    <p class="question-title">3. 다시 '수상한놀이' 행사에 참여하고 싶으신가요?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="p_q3_reparticipate" value="전혀 그렇지 않다" required> 전혀 그렇지 않다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q3_reparticipate" value="그렇지 않다"> 그렇지 않다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q3_reparticipate" value="보통이다"> 보통이다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q3_reparticipate" value="그렇다"> 그렇다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q3_reparticipate" value="매우 그렇다"> 매우 그렇다
                        </label>
                    </div>
                </div>

                <!-- 4. 이번 행사를 친구나 다른 사람에게 추천하고 싶으신가요? -->
                <div class="question-group">
                    <p class="question-title">4. 이번 행사를 친구나 다른 사람에게 추천하고 싶으신가요?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="p_q4_recommend" value="전혀 추천하고 싶지 않다" required> 전혀 추천하고 싶지 않다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q4_recommend" value="추천하고 싶지 않다"> 추천하고 싶지 않다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q4_recommend" value="보통이다"> 보통이다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q4_recommend" value="추천하고 싶다"> 추천하고 싶다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="p_q4_recommend" value="매우 추천하고 싶다"> 매우 추천하고 싶다
                        </label>
                    </div>
                </div>

                <!-- 5. 추가적으로 제안하고 싶은 사항 (초등학생용) -->
                <div class="question-group">
                    <p class="question-title">5. '수상한놀이' 행사를 위해 추가적으로 제안하고 싶은 사항이 있으시면 자유롭게 작성해주세요.</p>
                    <textarea name="p_q5_suggestions" placeholder="자유롭게 작성"></textarea>
                </div>

                <button type="submit" class="submit-button">설문 제출하기</button>
                <div id="participantMessageBox" class="message-box hidden"></div>
            </form>
        </div>

        <!-- 인솔자용 설문지 (성인) -->
        <div id="instructorFormContainer" class="hidden">
            <h3 class="text-2xl font-bold text-center text-gray-800 mb-6">인솔자용 설문지 (성인)</h3>
            <form id="instructorSurveyForm" class="space-y-6">
                <!-- 1. '수상한놀이' 행사의 전반적인 만족도는 어떠셨습니까? -->
                <div class="question-group">
                    <p class="question-title">1. '수상한놀이' 행사의 전반적인 만족도는 어떠셨습니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q1_satisfaction" value="매우 불만족" required> 매우 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q1_satisfaction" value="불만족"> 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q1_satisfaction" value="보통"> 보통
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q1_satisfaction" value="만족"> 만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q1_satisfaction" value="매우 만족"> 매우 만족
                        </label>
                    </div>
                </div>

                <!-- 2. 등록 및 안내 과정은 원활했습니까? -->
                <div class="question-group">
                    <p class="question-title">2. 등록 및 안내 과정은 원활했습니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q2_registration" value="매우 불만족" required> 매우 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q2_registration" value="불만족"> 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q2_registration" value="보통"> 보통
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q2_registration" value="만족"> 만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q2_registration" value="매우 만족"> 매우 만족
                        </label>
                    </div>
                </div>

                <!-- 3. 프로그램 내용 및 구성은 적절했다고 생각하십니까? -->
                <div class="question-group">
                    <p class="question-title">3. 프로그램 내용 및 구성은 적절했다고 생각하십니까? (수상 안전 교육, 심폐소생술 교육 및 실습, 생존수영, 레저스포츠 체험 등을 포함)</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q3_program_content" value="매우 불만족" required> 매우 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q3_program_content" value="불만족"> 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q3_program_content" value="보통"> 보통
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q3_program_content" value="만족"> 만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q3_program_content" value="매우 만족"> 매우 만족
                        </label>
                    </div>
                </div>

                <!-- 4. 행사 장소(여주시수상센터) 및 시설은 전반적으로 만족스러웠습니까? -->
                <div class="question-group">
                    <p class="question-title">4. 행사 장소(여주시수상센터) 및 시설은 전반적으로 만족스러웠습니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q4_venue_facility" value="매우 불만족" required> 매우 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q4_venue_facility" value="불만족"> 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q4_venue_facility" value="보통"> 보통
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q4_venue_facility" value="만족"> 만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q4_venue_facility" value="매우 만족"> 매우 만족
                        </label>
                    </div>
                </div>

                <!-- 5. 운영 및 스태프(경기도체육회 직원, 여주시수상센터 직원)의 친절도에 대해 어떻게 평가하십니까? -->
                <div class="question-group">
                    <p class="question-title">5. 운영 및 스태프(경기도체육회 직원, 여주시수상센터 직원)의 친절도에 대해 어떻게 평가하십니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q5_staff_kindness" value="매우 불만족" required> 매우 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q5_staff_kindness" value="불만족"> 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q5_staff_kindness" value="보통"> 보통
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q5_staff_kindness" value="만족"> 만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q5_staff_kindness" value="매우 만족"> 매우 만족
                        </label>
                    </div>
                </div>

                <!-- 6. 시간 배분 및 진행 원활도(집결 및 환복, 교육, 중식, 체험, 샤워 및 귀가 등)는 어떠했습니까? -->
                <div class="question-group">
                    <p class="question-title">6. 시간 배분 및 진행 원활도(집결 및 환복, 교육, 중식, 체험, 샤워 및 귀가 등)는 어떠했습니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q6_time_management" value="매우 불만족" required> 매우 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q6_time_management" value="불만족"> 불만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q6_time_management" value="보통"> 보통
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q6_time_management" value="만족"> 만족
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q6_time_management" value="매우 만족"> 매우 만족
                        </label>
                    </div>
                </div>

                <!-- 7. 이번 행사를 통해 참여 학생들이 하계 수상 안전 교육 및 체험, 스포츠 활동 등의 목적을 달성하는 데 도움이 되었다고 생각하십니까? -->
                <div class="question-group">
                    <p class="question-title">7. 이번 행사를 통해 참여 학생들이 하계 수상 안전 교육 및 체험, 스포츠 활동 등의 목적을 달성하는 데 도움이 되었다고 생각하십니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q7_student_benefit" value="전혀 그렇지 않다" required> 전혀 그렇지 않다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q7_student_benefit" value="그렇지 않다"> 그렇지 않다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q7_student_benefit" value="보통이다"> 보통이다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q7_student_benefit" value="그렇다"> 그렇다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q7_student_benefit" value="매우 그렇다"> 매우 그렇다
                        </label>
                    </div>
                </div>

                <!-- 8. 다음 행사에 다시 참여하거나 추천하시겠습니까? -->
                <div class="question-group">
                    <p class="question-title">8. 다음 행사에 다시 참여하거나 추천하시겠습니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q8_recommend" value="전혀 그렇지 않다" required> 전혀 그렇지 않다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q8_recommend" value="그렇지 않다"> 그렇지 않다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q8_recommend" value="보통이다"> 보통이다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q8_recommend" value="그렇다"> 그렇다
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q8_recommend" value="매우 그렇다"> 매우 그렇다
                        </label>
                    </div>
                </div>

                <!-- 9. 가장 만족스러웠던 점 -->
                <div class="question-group">
                    <p class="question-title">9. [자유 응답] 이번 '수상한놀이' 행사에서 가장 만족스러웠던 점은 무엇이며, 다음 행사에 개선하지 않고 유지해야 할 강점은 무엇이라고 생각하십니까?</p>
                    <textarea name="q9_most_satisfied" placeholder="자유롭게 작성"></textarea>
                </div>

                <!-- 10. 개선이 필요하다고 생각하는 점 -->
                <div class="question-group">
                    <p class="question-title">10. [자유 응답] 이번 '수상한놀이' 행사에서 개선이 필요하다고 생각하는 점은 무엇이며, 다음 행사에 반영해야 할 약점은 무엇이라고 생각하십니까?</p>
                    <textarea name="q10_areas_for_improvement" placeholder="자유롭게 작성"></textarea>
                </div>

                <!-- 11. 추가적으로 제안하고 싶은 사항 -->
                <div class="question-group">
                    <p class="question-title">11. [자유 응답] '수상한놀이' 행사를 위해 추가적으로 제안하고 싶은 사항이 있으시면 자유롭게 작성해주십시오.</p>
                    <textarea name="q11_suggestions" placeholder="자유롭게 작성"></textarea>
                </div>

                <!-- 참여자 특성 (선택 사항) -->
                <h3 class="text-xl font-semibold text-gray-800 mt-8 mb-4">참여자 특성 (선택 사항)</h3>

                <!-- 12. 귀하의 소속은 어디입니까? -->
                <div class="question-group">
                    <p class="question-title">12. 귀하의 소속은 어디입니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q12_affiliation" value="초등학교/분교"> 초등학교/분교
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q12_affiliation" value="지역아동센터"> 지역아동센터
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q12_affiliation" value="유소년복지시설"> 유소년복지시설
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q12_affiliation" value="기타"> 기타
                            <input type="text" name="q12_affiliation_other" class="text-input-other" placeholder="직접 입력">
                        </label>
                    </div>
                </div>

                <!-- 13. 본 행사에 참여하게 된 주된 목적은 무엇입니까? -->
                <div class="question-group">
                    <p class="question-title">13. 본 행사에 참여하게 된 주된 목적은 무엇입니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q13_purpose" value="수상 안전 교육 및 체험"> 수상 안전 교육 및 체험
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q13_purpose" value="스포츠활동을 통한 체력 증진"> 스포츠활동을 통한 체력 증진
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q13_purpose" value="계절 레포츠 체험"> 계절 레포츠 체험
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q13_purpose" value="인솔 및 학생 관리"> 인솔 및 학생 관리
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q13_purpose" value="기타"> 기타
                            <input type="text" name="q13_purpose_other" class="text-input-other" placeholder="직접 입력">
                        </label>
                    </div>
                </div>

                <!-- 향후 스포츠박스 행사 및 프로그램 정보 수신 동의 여부 -->
                <div class="question-group">
                    <p class="question-title">향후 스포츠박스 행사 및 프로그램 정보를 받아보시겠습니까?</p>
                    <div class="flex flex-col sm:flex-row sm:justify-around mt-4">
                        <label class="radio-option">
                            <input type="radio" name="q14_receive_info" value="예" required> 예
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="q14_receive_info" value="아니오"> 아니오
                        </label>
                    </div>
                </div>

                <button type="submit" class="submit-button">설문 제출하기</button>
                <div id="instructorMessageBox" class="message-box hidden"></div>
            </form>
        </div>
    </div>

    <script>
        // 이 URL을 구글 앱스 스크립트 웹 앱으로 배포한 후 얻은 URL로 변경해야 합니다.
        // 예시: const FORM_ACTION_URL = 'https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec';
        // 중요: 배포된 구글 앱스 스크립트 웹 앱 URL을 정확히 입력해야 합니다.
        // 이 URL은 'https://script.google.com/macros/s/...' 형태로 시작합니다.
        const FORM_ACTION_URL = 'https://script.google.com/macros/s/AKfycbxF3iDpRIbRxqYMaFh-aBwnLks2KfHRIGbxn8IHd5LJxART5do858nUzIat4eQqrHWlWA/exec'; 

        const surveyTypeSelectors = document.querySelectorAll('input[name="survey_type_selector"]');
        const participantFormContainer = document.getElementById('participantFormContainer');
        const instructorFormContainer = document.getElementById('instructorFormContainer');

        const participantSurveyForm = document.getElementById('participantSurveyForm');
        const instructorSurveyForm = document.getElementById('instructorSurveyForm');

        const participantMessageBox = document.getElementById('participantMessageBox');
        const instructorMessageBox = document.getElementById('instructorMessageBox');

        // 초기 상태 설정: 모든 폼 숨기기
        participantFormContainer.classList.add('hidden');
        instructorFormContainer.classList.add('hidden');

        // 설문 유형 선택 시 폼 표시 로직
        surveyTypeSelectors.forEach(selector => {
            selector.addEventListener('change', (event) => {
                const selectedType = event.target.value;
                if (selectedType === 'participant') {
                    participantFormContainer.classList.remove('hidden');
                    instructorFormContainer.classList.add('hidden');
                    instructorSurveyForm.reset(); // 다른 폼 숨길 때 초기화
                    instructorMessageBox.classList.add('hidden');
                } else if (selectedType === 'instructor') {
                    instructorFormContainer.classList.remove('hidden');
                    participantFormContainer.classList.add('hidden');
                    participantSurveyForm.reset(); // 다른 폼 숨길 때 초기화
                    participantMessageBox.classList.add('hidden');
                }
            });
        });

        // 폼 제출 공통 함수
        async function submitSurvey(form, messageBox, surveyType) {
            // 메시지 박스 초기화
            messageBox.classList.remove('success', 'error', 'loading');
            messageBox.classList.add('hidden');
            messageBox.textContent = '';

            // 폼 데이터 수집 및 URLSearchParams로 변환
            const formData = new FormData(form);
            const data = {};
            for (let [key, value] of formData.entries()) {
                // '기타' 옵션 처리
                if (key.endsWith('_other') && value.trim() !== '') {
                    const baseKey = key.replace('_other', '');
                    data[baseKey] = value.trim(); // '기타' 입력값을 해당 질문의 값으로 사용
                } else if (!key.endsWith('_other')) {
                    data[key] = value;
                }
            }
            data.surveyType = surveyType; // 설문 유형 추가

            const urlEncodedData = new URLSearchParams(data).toString();


            // '기타' 라디오 버튼이 선택되었지만 텍스트 필드가 비어있는 경우 처리 (인솔자용만 해당)
            if (surveyType === 'instructor') {
                if (data['q12_affiliation'] === '기타' && (!data['q12_affiliation_other'] || data['q12_affiliation_other'].trim() === '')) {
                    messageBox.classList.remove('hidden');
                    messageBox.classList.add('error');
                    messageBox.textContent = '소속의 "기타"를 선택하셨다면 내용을 입력해주세요.';
                    return;
                }
                if (data['q13_purpose'] === '기타' && (!data['q13_purpose_other'] || data['q13_purpose_other'].trim() === '')) {
                    messageBox.classList.remove('hidden');
                    messageBox.classList.add('error');
                    messageBox.textContent = '참여 목적의 "기타"를 선택하셨다면 내용을 입력해주세요.';
                    return;
                }
            }


            // --- 수정된 필수 응답 확인 로직 ---
            let allRequiredQuestionsAnswered = true;
            const requiredRadioGroupNames = new Set();

            // Identify all unique names of radio groups that have at least one 'required' radio button
            form.querySelectorAll('input[type="radio"][required]').forEach(radio => {
                requiredRadioGroupNames.add(radio.name);
            });

            // For each identified required radio group, check if any option is selected
            requiredRadioGroupNames.forEach(groupName => {
                const radiosInGroup = form.querySelectorAll(`input[type="radio"][name="${groupName}"]`);
                let isGroupChecked = false;
                radiosInGroup.forEach(radio => {
                    if (radio.checked) {
                        isGroupChecked = true;
                    }
                });
                if (!isGroupChecked) {
                    console.error(`Missing required radio for group (refined check): ${groupName}`); // 디버깅용 로그 추가
                    allRequiredQuestionsAnswered = false;
                }
            });

            if (!allRequiredQuestionsAnswered) {
                messageBox.classList.remove('hidden');
                messageBox.classList.add('error');
                messageBox.textContent = '모든 필수 질문에 응답해주세요.';
                return;
            }
            // --- 수정된 필수 응답 확인 로직 끝 ---


            // 제출 중 메시지 표시
            messageBox.classList.remove('hidden', 'success', 'error');
            messageBox.classList.add('loading');
            messageBox.textContent = '설문 제출 중... 잠시만 기다려주세요.';

            try {
                // Content-Type을 application/x-www-form-urlencoded로 설정
                const response = await fetch(FORM_ACTION_URL, {
                    method: 'POST',
                    mode: 'no-cors', 
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: urlEncodedData, // URLSearchParams로 변환된 데이터 전송
                });

                // no-cors 모드에서는 response.ok를 확인할 수 없으므로, 성공 메시지를 바로 표시
                messageBox.classList.remove('loading');
                messageBox.classList.add('success');
                messageBox.textContent = '설문이 성공적으로 제출되었습니다. 감사합니다!';
                form.reset(); // 폼 초기화

            } catch (error) {
                console.error('설문 제출 오류:', error);
                messageBox.classList.remove('loading');
                messageBox.classList.add('error');
                messageBox.textContent = '설문 제출 중 오류가 발생했습니다. 다시 시도해주세요.';
            }
        }

        // 각 폼에 대한 제출 이벤트 리스너
        participantSurveyForm.addEventListener('submit', (event) => {
            event.preventDefault();
            submitSurvey(participantSurveyForm, participantMessageBox, 'participant');
        });

        instructorSurveyForm.addEventListener('submit', (event) => {
            event.preventDefault();
            submitSurvey(instructorSurveyForm, instructorMessageBox, 'instructor');
        });

        // '기타' 텍스트 필드 활성화/비활성화 로직 (인솔자용)
        function setupOtherInputLogic(formId, radioName, otherInputName) {
            const form = document.getElementById(formId);
            if (!form) return; // 폼이 존재하지 않으면 함수 종료

            form.querySelectorAll(`input[name="${radioName}"]`).forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const otherInput = form.querySelector(`input[name="${otherInputName}"]`);
                    if (otherInput) { // otherInput이 존재하는지 확인
                        if (e.target.value === '기타') {
                            otherInput.style.display = 'inline-block';
                            otherInput.setAttribute('required', 'required'); // 기타 선택 시 필수 입력
                        } else {
                            otherInput.style.display = 'none';
                            otherInput.removeAttribute('required');
                            otherInput.value = ''; // 기타 선택 해제 시 값 초기화
                        }
                    }
                });
            });
        }

        // 페이지 로드 시 '기타' 텍스트 필드 숨기기 및 로직 설정
        document.addEventListener('DOMContentLoaded', () => {
            // 인솔자용 폼의 '기타' 필드 설정
            setupOtherInputLogic('instructorSurveyForm', 'q12_affiliation', 'q12_affiliation_other');
            setupOtherInputLogic('instructorSurveyForm', 'q13_purpose', 'q13_purpose_other');
            
            // 초기 로드 시 모든 기타 입력 필드 숨기기
            document.querySelectorAll('.text-input-other').forEach(input => {
                input.style.display = 'none';
            });
        });
    </script>
</body>
</html>
